{"componentChunkName":"component---src-templates-post-tsx","path":"/callback/","result":{"data":{"markdownRemark":{"html":"<p>업무중에 setTimeout, 특정 반목문, event callback function 등 특정상황에서 콜백함수 내부에서 this를 바인딩해서 사용하는 경우가 있었는데 그 경우를 실행 컨텍스트, 제어권에 따라 달라지는 것으로</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">\t<span class=\"token number\">1</span> 콜백함수란<span class=\"token operator\">?</span>\n\t<span class=\"token number\">2</span> 제어권\n\t\t<span class=\"token number\">2</span><span class=\"token operator\">-</span><span class=\"token number\">1</span> 호출시점\n\t\t<span class=\"token number\">2</span><span class=\"token operator\">-</span><span class=\"token number\">2</span> 인자\n\t\t<span class=\"token number\">2</span><span class=\"token operator\">-</span><span class=\"token number\">3</span> <span class=\"token keyword\">this</span>\n\t<span class=\"token number\">3</span> 콜백 함수는 함수다\n\t<span class=\"token number\">4</span> 콜백 함수 내부의 <span class=\"token keyword\">this</span>에 다른 값 바인딩하기\n\t<span class=\"token number\">5</span> 콜백 지옥과 비동기 제어</code></pre></div>\n<h1 id=\"1-콜백함수란\" style=\"position:relative;\"><a href=\"#1-%EC%BD%9C%EB%B0%B1%ED%95%A8%EC%88%98%EB%9E%80\" aria-label=\"1 콜백함수란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 콜백함수란?</h1>\n<blockquote>\n<p>다른 코드의 인자로 넘겨주는 함수(제어권도 함께 위임)\n콜백함수를 넘겨 받는 코드는 이 콜백 함수를 필요에 따라 적절한 시점에 실행</p>\n</blockquote>\n<h1 id=\"2-제어권\" style=\"position:relative;\"><a href=\"#2-%EC%A0%9C%EC%96%B4%EA%B6%8C\" aria-label=\"2 제어권 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 제어권</h1>\n<blockquote>\n<p>호출시점, 인자, this 예제를 통해서 알아 보자</p>\n</blockquote>\n<h2 id=\"2-1-호출시점\" style=\"position:relative;\"><a href=\"#2-1-%ED%98%B8%EC%B6%9C%EC%8B%9C%EC%A0%90\" aria-label=\"2 1 호출시점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1 호출시점</h2>\n<blockquote>\n<p>setInterval에 callback function은 '호출주체, 제어권'은 setInterval이다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">cbFunc</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    conosl<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>count <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>cbFunc<span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"2-2-인자\" style=\"position:relative;\"><a href=\"#2-2-%EC%9D%B8%EC%9E%90\" aria-label=\"2 2 인자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2 인자</h2>\n<blockquote>\n<p>콜백 함수의 제어권을 넘겨받은 코드는 콜백 함수를 호출할 때 인자에 어떤 값들을 어떤 순서로 넘길 것인지에 대한 제어권을 가진다.</p>\n</blockquote>\n<ul>\n<li>\n<p>callback function의 인자 값은 filter에 의해서 정해졌다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> newArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">idx<span class=\"token punctuation\">,</span> val</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'this sceop'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> idx<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> val <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>a<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// {a:1, b:2}코드에 대한 설명은 아래 2-3 this설명에서 알 수 있다.</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newArr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//[4,5]</span>\n\n<span class=\"token comment\">/*\n    this sceop: {a: 1, b: 2}\n    idx: 1\n    val: 0\n    \n    this sceop: {a: 1, b: 2}\n    idx: 2\n    val: 1\n    \n    this sceop: {a: 1, b: 2}\n    idx: 3\n    val: 2\n    \n    this sceop: {a: 1, b: 2}\n    idx: 4\n    val: 3\n    \n    this sceop: {a: 1, b: 2}\n    idx: 5\n    val: 4\n*/</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"2-3-this\" style=\"position:relative;\"><a href=\"#2-3-this\" aria-label=\"2 3 this permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3 this</h2>\n<ul>\n<li>\n<p>Array.prototype.map - 구현    </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">filter</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback<span class=\"token punctuation\">,</span> thisArg</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> mappedArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> mappedValue <span class=\"token operator\">=</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>thisArg <span class=\"token operator\">||</span> window<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> i <span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//POINT</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>주석 POINT 설명</p>\n<ul>\n<li>thisArg || window<br>\n: callback function에서 this의 scope을 명시적으로 바인딩\n: 이 코드에 의해 filter의 두번째 param으로 callback의 this를 정해줄 수 있다.\n: 2-2인자 챕터 코드 참고하기</li>\n<li>this<br>\n: filter를 호출 한 array(이 내용은 prototype과 관련해서 더 설명할 수 있겠다.)  </li>\n<li>this[i]<br>\n: 이 코드에 의해서 callback function의 첫번째 param array의 i번째 요소</li>\n<li>i<br>\n: 이 코드에 의해서 callback function의 두번째 param array의 i번째</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"3-콜백-함수는-함수다\" style=\"position:relative;\"><a href=\"#3-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98%EB%8A%94-%ED%95%A8%EC%88%98%EB%8B%A4\" aria-label=\"3 콜백 함수는 함수다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 콜백 함수는 함수다</h1>\n<ul>\n<li>\n<p>메서드를 콜백함수로 전달한 경우</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    vals<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">logValues</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">logValues</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//{vals: Array(3), logValues: f} 10 20</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>logValues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\n    Window{...} 10 0\n    Window{...} 20 1\n    Window{...} 30 2    \n*/</span></code></pre></div>\n<ul>\n<li>\n<p>forEach의 callback function은 코드에 의해서 호출된 logValues에서 this는 Window를 가르키고 있다.</p>\n<ul>\n<li>callback function으로 obj 객체에 의해서 this가 결정되지 않고 별도로 this를 명시하는 인자를 지정하지 않았으므로 함수 내부에서의 this는 전역객체를 가르친다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-콜백-함수-내부의-this에-다른-값-바인딩하기\" style=\"position:relative;\"><a href=\"#4-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98-%EB%82%B4%EB%B6%80%EC%9D%98-this%EC%97%90-%EB%8B%A4%EB%A5%B8-%EA%B0%92-%EB%B0%94%EC%9D%B8%EB%94%A9%ED%95%98%EA%B8%B0\" aria-label=\"4 콜백 함수 내부의 this에 다른 값 바인딩하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4 콜백 함수 내부의 this에 다른 값 바인딩하기</h1>\n<ul>\n<li>\n<p>콜백 함수 내부의 this에 따른 값을 바인딩하는 방법 (1/3)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> me <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>             <span class=\"token comment\">//POINT</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>me<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> callback <span class=\"token operator\">=</span> obj1<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>var me = this;는 closure scope에 등록</li>\n<li>setTimeout에 의해서 callback function이 호출 될때 me.name은 excute context에서 me.name 변수를 찾는다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 522px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c25c9b80a2ce8858bb324473ca0d4b2/cc316/callback%26scope%26closure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.10727969348659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQoz1WSS2/aQBSFrf6BSl1GVdMEh4Skxrz9AOPXjI2BmFcSKCGlSFWkStlUXXRRqX/96wSraVh8uqMr3TPn3BktChMWqwU3y5zlaMA4TZEyJoojYhHvCWNJ4F2xu3vH0+6Ux/UR3x8+8DB7y1RozJM3L2iBFzAfxdzlU8bTL4zyFePZhoFISUKxJ1PnrmMzHAomkxFdt4XrNHHsBrZVP0BrZC5G3qOdB/ycJPxZ5PyepUSbjPZNn+bMozH1aLoWfiAZjnO8foBhmHuqZo1q9T+alfRw8hB/EvI0dvk1D/mRKzfrjHQtiW4Fbh7RsC1qTQe36+K4XUzT5OLiHF3XD9DSOCFL1HA6xFPnXiTxRYIM1f4CgVCRU7XDZqNBrVbD83zl0Kder1OpVCiXywdo1+Mpq82W+eYrt6s7dtst95sFD4+fGWQZcRwjhMCyLCKZIAYZ9WYLQ0U1lMuquuQZQ2EqND/wyQYD0kQqEuVUvbKqSaaqEvon2Gq3CToWom3TuapgVz9RK+sFZzp1VSvPDvv9vhoS6pvE++EXoqIKRSgkWavGrmVybztsfZdd2CXVj5Hlj6TnJ8TlE27094WglPLFyQGx2AsGSnCqxL6ZlyybdZYtg8WlzrJ8zORKZ2FWuDbO2Z0dFYLiVbTXFL2i3+m0EV2HpOdSLZ1S1U8xz0oFeknFLnGpov8FSh1YkRqNC5QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"callback &amp; scope &amp; clousre\"\n        title=\"callback &amp; scope &amp; clousre\"\n        src=\"/static/2c25c9b80a2ce8858bb324473ca0d4b2/cc316/callback%26scope%26closure.png\"\n        srcset=\"/static/2c25c9b80a2ce8858bb324473ca0d4b2/00d96/callback%26scope%26closure.png 148w,\n/static/2c25c9b80a2ce8858bb324473ca0d4b2/0b23c/callback%26scope%26closure.png 295w,\n/static/2c25c9b80a2ce8858bb324473ca0d4b2/cc316/callback%26scope%26closure.png 522w\"\n        sizes=\"(max-width: 522px) 100vw, 522px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</li>\n<li>\n<p>콜백 함수 내부의 this에 따른 값을 바인딩하는 방법 (2/3)</p>\n<ul>\n<li>\n<p>예제1에서 만들었던 함수 재활용하는 방법 - cb2 확인해보자</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> me <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\">//POINT: closure</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>me<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'obj2'</span><span class=\"token punctuation\">,</span>\n    func<span class=\"token operator\">:</span> obj1<span class=\"token punctuation\">.</span>func\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> cb1 <span class=\"token operator\">=</span> obj1<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cb1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>cb1<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> cb2 <span class=\"token operator\">=</span> obj2<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cb2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>cb2<span class=\"token punctuation\">,</span> <span class=\"token number\">1500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obj3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'obj3'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> cb3 <span class=\"token operator\">=</span> obj1<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">//POINT: obj1.func = function(){ var me this; return function(p1){ console.log() }} </span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>cb3<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n    # 결과\n        * cb1: undefined \"obj1\" \"callback1\"\n        * cb2: undefined \"obj2\" \"callback2\"\n        * cb3: obj3 obj1 callback3\n*/</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>콜백 함수 내부의 this에 따른 값을 바인딩하는 방법 (3/3)</p>\n<ul>\n<li>\n<p>bind로 this를 명시한 function을 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span><span class=\"token string\">'obj2'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n    # 결과\n        * obj1\n        * obj2\n*/</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"5-콜백-지옥과-비동기-제어\" style=\"position:relative;\"><a href=\"#5-%EC%BD%9C%EB%B0%B1-%EC%A7%80%EC%98%A5%EA%B3%BC-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%A0%9C%EC%96%B4\" aria-label=\"5 콜백 지옥과 비동기 제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5 콜백 지옥과 비동기 제어</h1>\n<blockquote>\n<p>콜백함수를 익명 함수로 전달하는 과정이 반복되어 코드의 들여쓰기 수준이 감당하기 힘들정도로 깊어지는 현상\n주로 이벤트 처리, 서버통신과 같은 비동기적인 작업을 수행하기 위해서 이런 형태가 등장</p>\n</blockquote>\n<ul>\n<li>\n<p>동기적인 코드</p>\n<ul>\n<li>현재 실행중인 코드가 완료된 후에야 다음 코드를 실행하는 방식</li>\n</ul>\n</li>\n<li>\n<p>비동기적인 코드</p>\n<ul>\n<li>현재 실행 중인 코드의 완료 여부와 무관하게 즉시 다음 코드로 넘어간다.</li>\n<li>CPU의 계산에 의해 즉시 처리가 가능한 대부분의 코드는 동기적인 코드 </li>\n</ul>\n</li>\n<li>\n<p>비동기적인 코드가 필요한 경우<br>\n: 웹의 복잡도가 높아진 만큼 비동기적인 코드의 비중이 예전보다 훨씬 높아졌다.</p>\n<ul>\n<li>실행대기(setTimeout)<br>\n: 사용자의 요청에 의해 특정 시간이 경과되기 전까지 어떤 함수의 실행을 보류</li>\n<li>실행대기(addEventListener)<br>\n: 사용자의 직접적인 개입이 있을 때 비로소 어떤 함수를 실행하도록 대기</li>\n<li>보류(XMLhttpRequest)<br>\n: 웹브라우저 자체가 아닌 별도의 대상에 무어가를 요청하고 그에 대한 응답이 왔을때 비로소 어떤 함수를 실행하도록 대기</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h1>\n<ul>\n<li>코어 자바스크립트 - 위키북스</li>\n<li>인사이드 자바스크립트</li>\n<li>자바스크립트 완벽 가이드</li>\n</ul>","excerpt":"업무중에 setTimeout, 특정 반목문, event callback function 등 특정상황에서 콜백함수 내부에서 this를 바인딩해서 사용하는 경우가 있었는데 그 경우를 실행 컨텍스트, 제어권에 따라 달라지는 것으로…","tableOfContents":"<ul>\n<li><a href=\"/callback/#1-%EC%BD%9C%EB%B0%B1%ED%95%A8%EC%88%98%EB%9E%80\">1 콜백함수란?</a></li>\n<li>\n<p><a href=\"/callback/#2-%EC%A0%9C%EC%96%B4%EA%B6%8C\">2 제어권</a></p>\n<ul>\n<li><a href=\"/callback/#2-1-%ED%98%B8%EC%B6%9C%EC%8B%9C%EC%A0%90\">2-1 호출시점</a></li>\n<li><a href=\"/callback/#2-2-%EC%9D%B8%EC%9E%90\">2-2 인자</a></li>\n<li><a href=\"/callback/#2-3-this\">2-3 this</a></li>\n</ul>\n</li>\n<li><a href=\"/callback/#3-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98%EB%8A%94-%ED%95%A8%EC%88%98%EB%8B%A4\">3 콜백 함수는 함수다</a></li>\n<li><a href=\"/callback/#4-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98-%EB%82%B4%EB%B6%80%EC%9D%98-this%EC%97%90-%EB%8B%A4%EB%A5%B8-%EA%B0%92-%EB%B0%94%EC%9D%B8%EB%94%A9%ED%95%98%EA%B8%B0\">4 콜백 함수 내부의 this에 다른 값 바인딩하기</a></li>\n<li><a href=\"/callback/#5-%EC%BD%9C%EB%B0%B1-%EC%A7%80%EC%98%A5%EA%B3%BC-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%A0%9C%EC%96%B4\">5 콜백 지옥과 비동기 제어</a></li>\n<li><a href=\"/callback/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>","fields":{"slug":"/callback/"},"frontmatter":{"title":"callback function","date":"Feb 02, 2020","tags":["javascript Core"],"keywords":["this","javascript this"]}}},"pageContext":{"slug":"/callback/","series":[]}}}