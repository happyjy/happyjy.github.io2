{"componentChunkName":"component---src-templates-post-tsx","path":"/OOPWithJavascript_4/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"목표\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목표</h1>\n<ul>\n<li>\b객체지향 프로그램이란 처음에 이루고자하는 목표에서부터 덩어리진 것을 차근차근 분리하고 깍아내는 과정입니다.  </li>\n<li>어떻게 깍을지 기준정하는 방법은? \"역할\" </li>\n<li>덩어리진 코드를 클래스로 나누려고 할때 \"역할, 기준\"이 필요하다. </li>\n<li>객체지향에서 \"역할, 기준\"은 역할, 책임 모델이라고 하는 것입니다.</li>\n<li>\"역할, 책임\"은 비슷해보이지만 동전의 양면을 가지고 있다. </li>\n<li>책임을 가지고 있다는건? 그 책임에 대한 권한도 가지고 있다.</li>\n<li>권한이 있다는건? 권한에 대한 책임이 있다.</li>\n<li>그래서 역할을 정의하려면 어떤 권한을 주입 받고, 그 권한으로 부터 무슨 일을 수행하는 권한을 양도 받기위해서는 어떤 책임까지 가져야 하는지 한번에 정의해야 한다. </li>\n</ul>\n<h1 id=\"1-isp\" style=\"position:relative;\"><a href=\"#1-isp\" aria-label=\"1 isp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ISP</h1>\n<blockquote>\n<p>SOLID 원칙 중 하나\nInterface Segregation\n인터페이스 분리하는 원칙(이 원칙으로 덩어리진 코드들을 나눌 수 있다.)</p>\n</blockquote>\n<ul>\n<li>\n<p>한 코드에 여러개가 들어가 있으면 이것들을 인터페이스별로 잘라서 분리 할 수 있다. </p>\n<ul>\n<li>여기서 인터페이스는 \b역할을 얘기합니다.(실제 물리적인 인터페이스를 말하는 것이 아님)</li>\n</ul>\n</li>\n<li>객체지향에서 코드 분리할때 가장 기본적인 방법이다. </li>\n<li>ViewModel을 이 법칙을 적용해보려고 한다. </li>\n</ul>\n<h2 id=\"11-옵저버-서브젝트-파일-리팩토링-하기\" style=\"position:relative;\"><a href=\"#11-%EC%98%B5%EC%A0%80%EB%B2%84-%EC%84%9C%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%8C%8C%EC%9D%BC-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%95%98%EA%B8%B0\" aria-label=\"11 옵저버 서브젝트 파일 리팩토링 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1 옵저버 서브젝트 파일 리팩토링 하기</h2>\n<ul>\n<li>\n<p>pdf4, 5, 6</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">#isUpdated <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> #listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token operator\">=></span>v<span class=\"token punctuation\">.</span><span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">static</span> #subjects <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">static</span> #inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">static</span> <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span><span class=\"token parameter\">_</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                vm<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                vm<span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>뷰모델에는 어울리지 않다고 보인다 </li>\n<li>\n<p>옵저버패턴에 서브젝트 역할 -> 분리하자!</p>\n<ul>\n<li>메소드 코드를 분리할때 변수도 같이 이동해야한다.</li>\n<li>메소드 설계시 의존하고 있는 필드를 역할별로 필드를 같이 쓰지 않게 잘 설계해야 한다.  </li>\n</ul>\n</li>\n<li>\n<p>SOLID 원칙을 보며 고민...\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21d56817eecbd11681051d8b35f8c1f5/28367/7.SOLID.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.90564292321925%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVQozyWSy09TURCHuzfxr9CVLoyxhdvXvb3QFgq0JZG2iLTUSrFviwEfrRJjSaGSCI1SaEJBiSLSQHxsjG6QsIOYgCYuiNGobNCFERNXfh7LYvKbyUy+8zvnjEZRFGQRFkXG12LG02yixyUTaldoVGVkWfQsCpLeROZSF89n01RLCaqTceZGQkJFXkryrNIv+mfR2O12Ojs78fl8eL0eAv5uUftwOp2YTCb+H3gANJLLhHgyPcBE7gLV6UHKhSgr5ZTQCEvli+SyQTRNTU2Ew2Gi0QjxeIxUKinqXvwC7HA4hEMzqqqi0+moPppgb3ebtZfT7H5cZ2N1hp/fXvP2TZk/u694sTCKxmq14nS1Y29uw9HioqXVVVN3ewdut1sA5ZpLo9FEqKeD7ECQeCLGjeES2SshlscdDGfayBcCRBNuNJJkJHimjYdTaSrFOMV8L/OTKUpjEXFVGbP5AKiIN67TWzh2woDW2oPcfZfTHhu3E4c5HzyCLSzT6JUE8KSWsWwff/ffwa8t9r9vw+8tfnxZp9Vhw2gyY1Et6CWJYGyQmYUlHs9m2FjxU73fx2w1R/KqF6negKpY0FjqJQJdPibyQxRH+pkaTVIs9DN2M06jTa05VAVQVydx7XqGvZ1Fvr5fYO/DnNAKn3aeMn4vxqm6+tqcpkH8pLWrgMH/gPS548xdPoQvcBRHWo+9w4jZqKA2qGi1Wm6NFlnb/Mzi/DCbyx4qU93cWRxiMB/BYDCgiG34B8ZAbMmNAw92AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Strategy\"\n        title=\"Strategy\"\n        src=\"/static/21d56817eecbd11681051d8b35f8c1f5/799d3/7.SOLID.png\"\n        srcset=\"/static/21d56817eecbd11681051d8b35f8c1f5/00d96/7.SOLID.png 148w,\n/static/21d56817eecbd11681051d8b35f8c1f5/0b23c/7.SOLID.png 295w,\n/static/21d56817eecbd11681051d8b35f8c1f5/799d3/7.SOLID.png 590w,\n/static/21d56817eecbd11681051d8b35f8c1f5/2a3d6/7.SOLID.png 885w,\n/static/21d56817eecbd11681051d8b35f8c1f5/28367/7.SOLID.png 1081w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>SOLID원칙 보고 어떻게 뷰모델에서 옵저버 서브젝트 파일을 빼낼까 고민 중...</li>\n<li>상속모델을 사용할 것이다 우측 하단과 비슷한 모델을 사용</li>\n<li>서브젝트모델 === 인터페이스A/<br>\n뷰모델 === 객체 === 서브젝트모델을 상속받은 모델</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token comment\">//설명1</span>\n    <span class=\"token keyword\">const</span> ViewModelSubject <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener<span class=\"token punctuation\">{</span> \n        #info <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> #listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//설명2 add, clear</span>\n        <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelValue<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span> \n        <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n        <span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token comment\">//설명3</span>\n            ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//설명4</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token operator\">=></span>v<span class=\"token punctuation\">.</span><span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>pdf8, 9</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ViewModelSubject <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener<span class=\"token punctuation\">{</span> \n    #info <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> #listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelValue<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span> \n    <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n    <span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token operator\">=></span>v<span class=\"token punctuation\">.</span><span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>설명1 상속</p>\n<ul>\n<li>\n<p>3강에서 ViewModel은 ViewModelListener을 상속는데 여기서 ViewModelSubject에 ViewModelListener을 상속 받는 이유는 뭘까? </p>\n<ul>\n<li>\n<p>Javascript는 다중 상속이 안돼서 어쩔 수 없이 ViewModelSubject가 ViewModelListener을 상속받고 ViewModel이 ViewModelSubject를 상속받는다 </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">3장 ViewModel -&gt;                     ViewModelListener\n4장 ViewModel -&gt; ViewModelSubject -&gt; ViewModelListener</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>설명2 add, clear추가 </p>\n<ul>\n<li>`#isUpdated -> #info</li>\n<li>`#info는 부모에 있는 private 속성이다. 자식이 못건드리기 때문에 부모에 속성 #info private 속성을 제거, 추가할때는 부모쪽에서 서비스를 내려줘야한다. 그래서 내가 ViewModel #info를 변경하고 싶을때는 부모쪽 메소드에서 ViewModel Value를 직접 넘겨 ViewModel를 직접 넘겨서 ViewModel Value를 부모인 서브젝트가 직접 추가하도록 위임해서 동작하게 해야한다. clear도 부모에게 직접 요청해서 추가해야 한다.</li>\n</ul>\n</li>\n<li>\n<p>설명3 watch</p>\n<ul>\n<li>이전에는 addListener를 하고 ViewModel이 생성되는 시점에 바로 전체 서브젝트 리스트에 등록했다. </li>\n<li>지금은 Listener가 들어온순간 서브젝트를 watch로 보낼 것이다.\n뷰모델 생성했다고 바로 requestAnimationFrame 넣어서 감시할 필요가 없다.\nListener가 하나라도 생겼을때 감시하면 된다!(\b뷰모델을 감사하는 사람이 없어 변화를 추적할 필요가 없다.)</li>\n</ul>\n</li>\n<li>\n<p>설명4 unwatch</p>\n<ul>\n<li>뮤보델은 구독하는 listener가 없을때 unwatch를 하자!</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"12-notify-리팩토링\" style=\"position:relative;\"><a href=\"#12-notify-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81\" aria-label=\"12 notify 리팩토링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2 notify 리팩토링</h2>\n<ul>\n<li>\n<p>pdf10</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">static</span> #subjects <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">static</span> #inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">static</span> <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span><span class=\"token parameter\">_</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                vm<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                vm<span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>requestAnimationFrame에 의해서 subject돌면서 뷰모델에 notify해준다. </li>\n<li>\n<p>pdf11-12</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ViewModelSubject <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener<span class=\"token punctuation\">{</span> \n\n    <span class=\"token comment\">//... 위 코드 참고</span>\n\n    <span class=\"token keyword\">static</span> #subjects <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">static</span> #inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">static</span> <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span><span class=\"token parameter\">_</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n                    v<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    v<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//설명1</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//설명2</span>\n    <span class=\"token keyword\">static</span> <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//set에 add해도 변화 x</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//설명3</span>\n    <span class=\"token keyword\">static</span> <span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>    </code></pre></div>\n</li>\n<li>notify가 무조건 돈다. </li>\n<li>\n<p>설명1 flag를 통한 Animation 제어</p>\n<ul>\n<li>requsetAnimationFrame를 동작 여부를 결정하는 flag \"#inited\"를 사용하고 있다. </li>\n</ul>\n</li>\n<li>\n<p>설명2, 설명3 flag를 통한 Animation 제어</p>\n<ul>\n<li>리스너가 없는 뷰모델을 여러개 만들어도 requestAnimationFrame은 돌지 않는다. 뷰모델에 리스너를 등록해야지 그 뷰모델을 감시하기 시작하고 리스너를 다 빼서 하나도 없다면 requestAnimation도 멈추게 된다. </li>\n<li>기존 notify함수에 this.#subjects.add(vm); 코드로 subject를 관리했는데 이렇게 하면 외부에서는 notify에 #subject에 add한다는 사실을 모른다. 그래서 외부에서 알 수 있도록 watch, unwatch함수 #subject.add, #subject.delete를 통해서 관리해주고 있다. </li>\n</ul>\n</li>\n<li>\n<p>추가 정보: 플래그변수, 싱글스레드, 멀티스레드 </p>\n<ul>\n<li>Javascript는 싱글스레드이기 때문에 플래그 변수로 제어하기 쉽다. 다른 언어는 멀시스레드이기 때문에 플래그 제어가 안된다. </li>\n<li>플래그 기만에 효율적인 알고리즘짜는것을 계속해서 연습해야 한다. </li>\n<li>멀티 스레드에서 작업할때는 플래그 기만이 아니라 멀티스레드에서 안정성을 확보하고 효율성을 확보하는 패턴을 배워야한다.</li>\n</ul>\n</li>\n<li>\n<p>추가 정보: static method</p>\n<ul>\n<li>notify static private method로 설정해야하는데 Javascript에는 static method를 지원하지 않아서 공개적으로 되어 있다. \u001f</li>\n<li>watch, unwatch도 외부에 공개 되어야 하지만 public은 아니다. 내부 Framework안에서 돌기 때문에 </li>\n</ul>\n</li>\n</ul>\n<h1 id=\"2-섬세한-권한-조정\" style=\"position:relative;\"><a href=\"#2-%EC%84%AC%EC%84%B8%ED%95%9C-%EA%B6%8C%ED%95%9C-%EC%A1%B0%EC%A0%95\" aria-label=\"2 섬세한 권한 조정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 섬세한 권한 조정</h1>\n<blockquote>\n<p>위 ISP방법을 통해서 ViewModel이 가벼워 졌는데 이제는 섬세한 권한 조정을 하려고 한다. </p>\n</blockquote>\n<ul>\n<li>\n<p>권한 조정이 필요한 이유 </p>\n<ul>\n<li>권한제어자가 기본적으로 제공되는 언어 java, 코틀린 private, internal, public </li>\n<li>Java의 기본 권한 private, Javascript 기본권한 public</li>\n<li>그래서 생기는 문제는 getter, setter외부에 노출이 되면 코드 조작이 가능해서 문제가 생긴다. </li>\n</ul>\n</li>\n<li>\n<p>아래 코드에 설명할 부분을 주석으로 6가지를 표시 했으며 아래 설명이 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ViewModel <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelSubject<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModel</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n    styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> attributes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> properties <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> events <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> \n    \n    <span class=\"token comment\">//설명1 readonly</span>\n    #subKey <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">subKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n    #parent <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#parent<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">//설명2 [설명6과 관련]Transaction 연산</span>\n    <span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> subKey</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#parent <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey <span class=\"token operator\">=</span> subKey<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> _<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>cat<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span> \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"styles,attributes,properties\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>obj <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">!=</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">invalid object cat:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>cat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, obj:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>obj<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> \n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>cat<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                    r<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n                        enumerable<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span><span class=\"token parameter\">_</span><span class=\"token operator\">=></span>v<span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span><span class=\"token parameter\">newV</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n                        v <span class=\"token operator\">=</span> newV<span class=\"token punctuation\">;</span>\n                        <span class=\"token comment\">//설명3 update할 객체 세팅 방법 변경</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModelValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey<span class=\"token punctuation\">,</span> cat<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span> \n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n                Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperties</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> \n                    <span class=\"token punctuation\">[</span>cat<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                        enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token parameter\">_</span> <span class=\"token operator\">=></span> obj<span class=\"token punctuation\">,</span>\n                        <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span> <span class=\"token parameter\">newV</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                            obj <span class=\"token operator\">=</span> newV<span class=\"token punctuation\">;</span>\n                            <span class=\"token comment\">//설명3 update할 객체 세팅 방법 변경</span>\n                            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModelValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey<span class=\"token punctuation\">,</span> <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span> cat<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span> \n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//설명6 [설명2와 관련]트렌젝션으로 setParent로 한번에 처리</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ViewModel</span><span class=\"token punctuation\">)</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//설명4 ViewModel.notify(this); 제거</span>\n        <span class=\"token comment\">//ViewModel.notify(this);</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">seal</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//설명5 viewModel</span>\n    <span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">updated</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>updated<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>설명1 readonly</p>\n<ul>\n<li>외부 공개, 쓰기는 private(public getter, private setter pattern)</li>\n</ul>\n</li>\n<li>\n<p>설명2 Transaction 연산</p>\n<ul>\n<li>\n<p>자바스크립트는 트렌젝션을 따로 지원하지 않기 때문에 함수를 통해서 트렌젝션 연산이라는 것을 알려줘야 한다. </p>\n<ul>\n<li>Transaction이란? 코드가 한번에 일어나야 하는 구간이다.<br>\n그런데 그 구간에서 하나하나 일어나야 하는건지 덩어리로 한번에 일어나는지 아닌지 구별하는 방법이 없다. 그런데 자바스크립트에서는 덩어리로 한번에 일어나게 하는 방법은 \"함수\"를 통해서 한번에 일어나야 할 코드들을 표시할 수 있다. </li>\n</ul>\n</li>\n<li>\n<p>이렇게 setParent 함수로 만든 다른이유는? </p>\n<ul>\n<li>코드로 가져 올때 코드가 아닌 함수로 가지고 오기때문에 '전달인자'를 넘겨줘서 문제 없이 세팅할수 있다. </li>\n<li>함수가 아닌 코드로 클래스에서 있을경우 함수에서 인자로 넘겨주는 변수들이 '지역변수, 클로저'에 설정되어 있기 때문에 문제가 될수있기 때문에   </li>\n</ul>\n</li>\n<li>내부 함수는 \"_\"를 붙이자.    </li>\n<li>이 코드는 parent를 세팅할\u001f때 있어야 하는 코드(기존에는 constructor안 dfineProperty하는 로직에 있었던 코드다.)</li>\n<li>코드에서 꼭 표현해야 할 것! -> \"Transaction\"이다    </li>\n</ul>\n</li>\n<li>\n<p>설명3 update할 객체 세팅 방법 변경 </p>\n<ul>\n<li>\n<p>기존에는 뷰모델 #isUpdated에 직접 Set객체에 add통해 설정했지만 현재는 ViewModelSubject 클래스로 이동해 상속받았기 때문에 부모에게 호출하고 있다.(this.add(...))</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//기존</span>\nvm<span class=\"token punctuation\">.</span>#isUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModelValue</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>subKey<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>설명4 ViewModel.notify(this); 제거</p>\n<ul>\n<li>\n<p>기존에는 뷰모델이 직접 자신에게 notify를 등록했는데 지금은 하지 않는다. 왜? </p>\n<ul>\n<li>생성시점에 등록 안할거고 addListener할때 lazy하게 등록할 것이기 때문!</li>\n<li>addListener에 lazy하는것도 뷰모델 서브젝트가 알아서 할 것이다. </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>설명5 ViewModelListener Class viewmodelUpdated 함수 오버라이딩</p>\n<ul>\n<li>ViewModelListener Class viewmodelUpdated 함수를 ViewModelSubject에서 오버라이딩 하지 않았다.\n그래서 ViewModel에서 오버라이딩 하지 않으면 throw된다.</li>\n<li>이번 강의 ViewModel 상속 관계도<br>\n: ViewModel -> ViewModelSubject -> ViewModelListener</li>\n<li>추가적으로 설명3과 같이 this.#isUpdated.add(v) -> this.add(v)로 코드가 변경됐다.</li>\n</ul>\n</li>\n<li>\n<p>설명6 트렌젝션으로 setParent로 한번에 처리</p>\n<ul>\n<li>기존에는 아래와 같은 코드를 setPraent 함수로 한번에 처리 했습니다.\nv.parent = this; v.subKey = k;, v.addListener(this); </li>\n</ul>\n</li>\n<li>\n<p>추가 설명</p>\n<ul>\n<li>그래서 부모 자식간, 필드 접근 권한, 트렌젝션에 의해 계층 권한이 생기는 경우 직접 변수에 접근한는 이유는 다양하다. </li>\n<li>권한관계라는건 발생하는건 여러가지 인데 물론 직짜 권한때문에 일어나느 경우가 많지만 트렌젝션때문에 일어나는 경우도 비일비재 하다.</li>\n<li>코드를 함수로 빼기위해서 코드를 한번 더 정리하기 때문에 코드 부분이 깔금하게 될 수 있다. </li>\n<li>코드가 길다 싶으면 외부함수, 스태틱함수로 변경하는건 좋은 연습니다.  </li>\n</ul>\n</li>\n</ul>\n<h1 id=\"3-visitor-pattern\" style=\"position:relative;\"><a href=\"#3-visitor-pattern\" aria-label=\"3 visitor pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Visitor Pattern</h1>\n<ul>\n<li>\n<p>Scanner? </p>\n<ul>\n<li>특정 el 하위를 검색해서 viewmodel대상인 여부를 확인해서 BinderItem을 만들어서 binder에게 넘겨준다. </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"리팩토링-전-scanner-소스-설명\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%EC%A0%84-scanner-%EC%86%8C%EC%8A%A4-%EC%84%A4%EB%AA%85\" aria-label=\"리팩토링 전 scanner 소스 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리팩토링 전 Scanner 소스 설명</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">const</span> Scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">scan</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> binder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Binder</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkItem</span><span class=\"token punctuation\">(</span>binder<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">//설명2 Visitor 패턴 적용 대상</span>\n            <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">let</span> target<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>target <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">checkItem</span><span class=\"token punctuation\">(</span>binder<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token comment\">//설명2-end</span>\n\n            <span class=\"token keyword\">return</span> binder<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">checkItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">binder<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//설명1 스캐너 역할</span>\n            <span class=\"token keyword\">const</span> vm <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data-viewmodel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span> binder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BinderItem</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>설명1 스캐너의 역할</p>\n<ul>\n<li>Binder의 Scanner가 아니라 Scanner Class로 빠진이유. (스캐너를 빼낸 이유) </li>\n<li>vuejs el속성들을 쓰고 싶다면 이곳에서 조작 후 아이템에 꽂아 주면 된다. </li>\n</ul>\n</li>\n<li>\n<p>설명2 Visitor 패턴 </p>\n<ul>\n<li>dom을 파싱 하는 부분은 Scanner, Binder class역할이라고 보기에 어렵다. 그래서 Visitor 패턴을 사용한다. </li>\n<li>Visitor 패턴 등장 인물2개/ care taker(원본데이터, 보살핌을 받는애)\u001d - Visitor 패턴 </li>\n<li>Visitor에게 caretaker를 주면 Visitor가 돌아준다? </li>\n</ul>\n</li>\n<li>\n<p>binder? </p>\n<ul>\n<li>그림을 그릴 대상을 binderItem으로 가지고 있다가 viewmodel에 꽂아 주면 viewmodel에 맞게 그림을 그려주는 역할을 하고 있다. </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"리팩토링-후-scanner-소스-설명\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%9B%84-scanner-%EC%86%8C%EC%8A%A4-%EC%84%A4%EB%AA%85\" aria-label=\"리팩토링 후 scanner 소스 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리팩토링 후 Scanner 소스 설명</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">const</span> Visitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//설명1</span>\n        <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">,</span> _0<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token string\">\"override\"</span> \n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> DomVisitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Visitor<span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//설명2 Generic</span>\n        <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">,</span> _0<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> _1<span class=\"token operator\">=</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">let</span> curr <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">;</span> \n            <span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>curr <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> Scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n        #visitor\n        <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">visitor<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>visitor<span class=\"token punctuation\">,</span> DomVisitor<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#visitor <span class=\"token operator\">=</span> visitor<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">scan</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> type9target<span class=\"token punctuation\">,</span> HTMLElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> binder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Binder</span>\n            <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> vm <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-viewmodel'</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span> binder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BinderItem</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#visitor<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> binder<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>설명1 추상인터페이스</p>\n<ul>\n<li>추상인터페이스에서 target이 어떤 타입(HTMLElement, JSON 등등)인지 알 필요가 없습니다. </li>\n<li>오버라이드를 하지 않으면 죽기때문에! 즉 오버라이드할때 target의 타입을 지정해줘야 한다. </li>\n</ul>\n</li>\n<li>\n<p>설명2 Generic</p>\n<ul>\n<li>자식에서 구체적인 타입을 알게 되는 것을 Generic이라고 한다. </li>\n<li>Generic은 원래 class옆에 표시하는건데 자바스크립트에서는 Generic이 있지 않기 때문에 이렇게 표시해준다. </li>\n<li>언어가 어떤 기능을 지원하는것보단 그 개념을 어떻게 적용하는지가 중요하다. </li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-추상계층-불일치\" style=\"position:relative;\"><a href=\"#4-%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5-%EB%B6%88%EC%9D%BC%EC%B9%98\" aria-label=\"4 추상계층 불일치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 추상계층 불일치</h1>\n<ul>\n<li>Scanner 클래스 리팩토링! 추상계층을 일치시켜주는 작업을 한다.  </li>\n<li>\n<p>연역적인 케이스를 가지고 연역적으로 원리를(추상적으로) 도출한뒤(귀납적) 다시 연역적으로 다시 도출  </p>\n<ul>\n<li>귀납적: 원리 -> 현상 예측/ 연역적: 현상 -> 원리 도출</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9fc32b7afd3b4533354f0dbe916856c7/acc57/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.391761612620506%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABZ0lEQVQozyWRSXLkIBBFdR0xgwSaQSq5HOFN7/r+R3lOlRcEkHzyD9m968FeT+qxkHNmLZFSJnzw+Ohkj4xO8VoK11pZBsuUHNFqUvQEwSUfCF7wUuui64nBYMYBnRJGHowxaKVk12jrMAKcS+J9zmxCnuad/dzJy4zNE2lpRKkZY+m2aWHKGyVFYXesc2JaG64UjNRsDPgUyNPAcawMef5gWjuZxsKaF0ZpqrT6iOje28B9nrTrph2VNk+07WIoM3pM2BCI3uDkwyZ277bzui7+/1T+vXa+X98ctVGWTJQIOmcUWdRkURpDQvUWaxzOWlliXfJ5mmrJajoOxnXHjSNhEOXOYZ9IJCIreK0lQys51WWknV+c2827ftHWi3Wv/NyLDOtgECIjDeueJbs387aKzUQSy06a9n1PL3bVY/lREZ3Bi5JnonmMH2al9N9QhDV5+8E43ePF0ePKqh4r9+f8TNc9S/C/G9jgKeBxqg4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       1\"\n        title=\"       1\"\n        src=\"/static/9fc32b7afd3b4533354f0dbe916856c7/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png\"\n        srcset=\"/static/9fc32b7afd3b4533354f0dbe916856c7/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png 148w,\n/static/9fc32b7afd3b4533354f0dbe916856c7/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png 295w,\n/static/9fc32b7afd3b4533354f0dbe916856c7/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png 590w,\n/static/9fc32b7afd3b4533354f0dbe916856c7/2a3d6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png 885w,\n/static/9fc32b7afd3b4533354f0dbe916856c7/acc57/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%981.png 1141w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/adb5e9d4f902e729c428ffaf9ac49923/d2b72/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.362676056338024%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABZ0lEQVQozz1R246kIBT0c0aBA4KAirfptns6nd2ZZP//X2oLH+aBoElR1+bcNqylYF9GhGFAyR4xJog1cF5gXY9oO9znEce0YhoEyVv0ouGdoCfOWwtnhbdC46VF7zRMb6GMgdb6OkopKK1g6r/qMMYe5xJQpoXCI01kxBQp6BFcROgjHEWaJRfkOCMPHlMQLMkhpxmWqpoAK+ZyEYPFSpcxkWwK2NYNeV4xHidCWdHpDmLo8FEG3I4Dx+2OjdGPeeLDg4r+l9CR0NDlTKLP1xdu7zf+/Tzw988T5/sb5flCuu/wU0JjyZxyvpStdeg6PtZCNYEx+opcyRS/R/YdGFki4wV3pTCGSTSrIt5Wh5Y9fXKQ/Xhgn2947g9G2lEY6X3OWJeVHVW3BvuasBA3LTMCOw1DhIigbVseRqa5RqhcF5O6FBdNQ3+B6iiaYpp3XbMWLuqDLviQjnXX0nl7kdTuhNheFP4DzuzgPF2cFZwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       2\"\n        title=\"       2\"\n        src=\"/static/adb5e9d4f902e729c428ffaf9ac49923/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png\"\n        srcset=\"/static/adb5e9d4f902e729c428ffaf9ac49923/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png 148w,\n/static/adb5e9d4f902e729c428ffaf9ac49923/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png 295w,\n/static/adb5e9d4f902e729c428ffaf9ac49923/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png 590w,\n/static/adb5e9d4f902e729c428ffaf9ac49923/2a3d6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png 885w,\n/static/adb5e9d4f902e729c428ffaf9ac49923/d2b72/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%982.png 1136w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>Scanner 클래스 constructor에 Domvisitor객체를 주입</p>\n<ul>\n<li>왜 Domvisitor를 바로 만들지 않고 Visitor 클래스를 만들어서 상속 받아서 구현했나? </li>\n<li>순수한 메모리 객체? Dom에 의존적이 네이티브 객체? </li>\n<li>\n<p>계층이 2, 1개 로 나뉘어 있다. </p>\n<ul>\n<li>Visitor, Domvisotor (순수한 메모리객체, Dom에 의존적인 네이티브 객체)</li>\n<li>Scanner</li>\n</ul>\n</li>\n<li>한쪽이 추상계층으로 했다면 다른 한쪽도 추상계층으로 맞춰줘야 한다.  </li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50c8ec15b2be0c428515a57697c5def6/1bcd6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.0630472854641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABJklEQVQoz41RS3KFMAzjOpCvA/kSEuBNu+/9D6OavO5fFxp54tgayVNeNe79RPEewRkorWG0HCylgpIaQkgkEviqFT0VlE1hJQ1nJMhqkH5qA6sVJsPF9+FwHQU5N5Sc0feEFAO2lUW2BM0DSgrUSHhVz72KzUe0mkFu44UOniKMJUyrlbhaRCqN1R0vIDj+5J2CMazuHJZlgZYLciAWK4gh4j4C7n5h57ryLDnCImZMOSfEyAvTwwEhhMHec+0f9qP/WJNCYPcGrTXcZ8PPV2F3BWd/Ie8ZPmyYzuvC9QGv++bM7Mi2HWx3DSygYI2CNsRCknMWA1PvHZ9wnidWtqTljMq2c6ocCcdh+RD0jmSe54F/L+x8gOhXztghbm7wGzTe0x9+AVd05TOHmcs3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       3\"\n        title=\"       3\"\n        src=\"/static/50c8ec15b2be0c428515a57697c5def6/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png\"\n        srcset=\"/static/50c8ec15b2be0c428515a57697c5def6/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png 148w,\n/static/50c8ec15b2be0c428515a57697c5def6/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png 295w,\n/static/50c8ec15b2be0c428515a57697c5def6/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png 590w,\n/static/50c8ec15b2be0c428515a57697c5def6/2a3d6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png 885w,\n/static/50c8ec15b2be0c428515a57697c5def6/1bcd6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%983.png 1142w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>리팩토링 전후의 Scanner Class 비교</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7e307e1816ffbe28796d33d3e85bf0ef/3cdf1/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56628621597893%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQoz21SWXKlMBDjOAPesI3x+oBMSNWr3P8+GtnJJPnIhwq63aglmSl5g7/1Qt0DordQSmE1GlJpKKlYG0i5oG4Kd7tQgkfynNESzvRZBas1az16k+HHd7O4WkFMDTlFHDUhhA2bCwhbJKHgsMJr8zhr5llB5bOWBGs3BBvhbIDhzOStwtEiUn2g7Su2zcM5klmJ1doBKcTY/kiOyxpKCni7GskPtFSQc4VQgo4WTMkpEiWUmLH7FdkJlN3DuwQtu21CyTGspGQ0DqUduM+M9zPgpdFVKRTUVRpMblV48uD1OlD74W6RY0TwiZlmeFrRJBTLjBxWvJwXYohcrunEY10dzwSEkHRChX24cPBRmEnecR8VR2lEZaYFkla1+sjQG4G0OWYYWAv0/DX7gkQdmllP8/Jh5Szcmhvejh3PY/skpEousXYdGfYsu9KOrkb9hxQDg/DPPA+Fz/vBG97htx0LlyyfNrqdXs+jR5B0YPmJ5QuT4v9m5MxbNbCOeXQVA99DP3vf77/jH1GUHK4BAXx2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       4\"\n        title=\"       4\"\n        src=\"/static/7e307e1816ffbe28796d33d3e85bf0ef/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png\"\n        srcset=\"/static/7e307e1816ffbe28796d33d3e85bf0ef/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png 148w,\n/static/7e307e1816ffbe28796d33d3e85bf0ef/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png 295w,\n/static/7e307e1816ffbe28796d33d3e85bf0ef/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png 590w,\n/static/7e307e1816ffbe28796d33d3e85bf0ef/2a3d6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png 885w,\n/static/7e307e1816ffbe28796d33d3e85bf0ef/3cdf1/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%984.png 1139w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>\n<p>Scanner 클래스 scan에 Element 지식 설명</p>\n<ul>\n<li>이것도 추상계층으로 나눈다 </li>\n<li>\n<p>리펙토링을 하면 Scanner 클래스는 인메모리 객체만 남게 된다. (네이티브 객체가 하나도 없다)</p>\n<ul>\n<li>기존에 Scanner는 dom베이스 객체가 있었는데 없애 버린것이다. </li>\n</ul>\n</li>\n<li>\n<p>Scanner를 추상화 시켜 dom 객체가 없다면 DomScanner는 Scanner를 상속받아 scan 함수를 오버라이딩 한다.  </p>\n<ul>\n<li>\n<p>DomScanner 클래스에 생성자 함수 DomVisitor를 받는다. 그리고 super로 Scanner 클래스에 전달하는데 Scanner 클래스는 Visitor 클래스를 받는다. </p>\n<ul>\n<li>자식은 부모를 대체 가능하기 때문에 문제 없다. </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Scanner scan 함수에 받는 인자 값 타입이 없었는데 DomScanner scan에 타입을 설정함(제너릭 기능)으로 구상화 했다.</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c73d8bf18d99bc917c22c174860dd882/acc57/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.012269938650306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABoElEQVQoz3VSSZKkMBDjNwXed4wx0F1TPcv/H6SR6TpNxBwUicOJlCl5qtHis11oOaNEB6UVnNWsBlppGFYhJJIVeB0NR+s49xUxJWwlIKUMYw2st6wWk+Xhq3t89oZaO1pdce0VOSekkJFTgZQSWmsEpxCdhg0OxrCab0Gl5BsKUwwW51FR+4W+eqSS4KmagoaLES4ESDYKTvtYBLFgZp059WORrAsWCoo3prV47FxjI3KJqMVg21aEskM7f0NYh0CBtjXketyia3HcJqLwrIOH4srKOUyBfv0+M358HNh3EmeHbS3IsWINFdEnKCorKfDcPF7XifPjid4ava/o24HgSWjkbcOkGUIjybE37FvB66Tpw/i2Y62Njer2Z+GKiutVilXexzCELH30DNHdfiraMi1CME1JgoKydXydhROnNyGnpIizI2lxEw+fz+vJ+yd+Xi/0emLvB349N1rVMQ2D9+zx53XSk4KYy/1MhOBkUt0JDzJjzHeymonf35arWowNR//oG5jkeGtyvp+Do6nj54VJ/g/zPDDfeBD/3v8F/1MctZiMkioAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       5\"\n        title=\"       5\"\n        src=\"/static/c73d8bf18d99bc917c22c174860dd882/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png\"\n        srcset=\"/static/c73d8bf18d99bc917c22c174860dd882/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png 148w,\n/static/c73d8bf18d99bc917c22c174860dd882/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png 295w,\n/static/c73d8bf18d99bc917c22c174860dd882/799d3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png 590w,\n/static/c73d8bf18d99bc917c22c174860dd882/2a3d6/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png 885w,\n/static/c73d8bf18d99bc917c22c174860dd882/acc57/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%985.png 1141w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>\n<p>Scanner, Visitor, DomScanner, DomVisitor 클래스 설명(하늘색선 있는 ppt)</p>\n<blockquote>\n<p>아래 두 계층을 나눈 설명은 이게 바로 추상레이어를 일치 시켜준 것이다. </p>\n</blockquote>\n<ul>\n<li>Scanner, Visitor: Dom에 대한 네이티브 객체가 없고 인메모리 객체만 있는 추상 계층이 생기고 </li>\n<li>DomScanner, DomVisitor: 더러운 Dom관련 처리를 해주는 구상클래스 세계</li>\n<li>\n<p>마틴파울러 아저씨는 기능, 도메인 적인 기능을 나눠서 서로 협력하게 만들어야 한다고 얘기 하셨다. </p>\n<ul>\n<li>기능: 변하지 않는 부분</li>\n<li>\n<p>도메인: 변하는 부분 </p>\n<ul>\n<li>그래야 나중에 도메인이 바뀌었을때 그 부분만 교체 가능하다고 얘기 하셨다. </li>\n<li>그래서 여기서 Scanner, Visitor는 \"기능\"적인 부분\nDomScanner, DomVisitor은 \"도메인(Dom)\"을 처리하는 부분이 된다. </li>\n</ul>\n</li>\n<li>그런데 도메인은 상황에 따라 바뀔 수 있다. 어떤경우에는 비즈니스 부분을 보호하고 네이티브에 이것이 스프링, my-sql? 이되던 문제 없이 동작할거야 라고 하면 도메인 쪽이 기능이 되는 것이다. 즉 변한는 부분과 변하지 않는 부분을 구분하라는 것이다. </li>\n</ul>\n</li>\n<li>\n<p>결과적으로 \"변화율\"을 고려해서 레이어를 나눈것이다. </p>\n<ul>\n<li>\n<p>변화율때문에 코드를 나눠서 정복한것이있다 그건? 코드를 고치지 않고 코드를 추가함으로 수정할 수 있다.</p>\n<ul>\n<li>예를 들어 Dom이 아닌 Canvas를 다룰 때 코드를 고치지 않고 CanvasScanner, CanvasVisitor를 만들면 됩니다.\n따라서 기존 코드의 변화가 없고 회귀 테스트가 필요없다. </li>\n<li>여기에 \"추상레이어\"의 장점은 코드를 수정하는게 아니라 코드를 추가함으로 요구사항, 문제가 생겼을때 해결할 수 있다.  여기서는 요구사항에 따라서 어떠한 Scanner, Visitor를 만들어 추가 할 수 있다. </li>\n<li>이게 바로 \"설계\"에 목메다는 이유입니다!!!</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>추상화 계층을 분리함으로써 \"OCP\" 를 지키고 있다. 다른말고 OCP를 지키려면 추상화 클래스가 필수다! </p>\n<ul>\n<li>O: OPEN, C: CLOSE - 확장에는 열려있고 수정에는 닫혀있다!</li>\n<li>SOLID 법칙은 사실 법칙이 아니라 객체지향설계를 잘하면 얻어질 수 있는 결과물이다. </li>\n</ul>\n</li>\n<li>\n<p>추상화계층을 만듬으로 \"OCP\"말고 다른 장점 </p>\n<ul>\n<li>추상화계층 클래스(Scanner, Visitor 클래스)는 initialize할때 로딩하고 구상클래스틑 원할때 동적 로딩하면 된다.\n즉 코드의 늦은 초기화, 클래스 초기화를 유도할 수 있다.<br>\n-> 이게 \"의존성 역전의 법칙(DIP)\"이다...</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 568px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/191b7b89ae57fc71983437d1ae1483fe/870c3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%986.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.084507042253522%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqUlEQVQI1z2P2w6CQAxE+R4WLwh7K6KLhhURNf7/xxyrMT6ctJlpk5li6VZIs+XUTczpwXmfqVtHjmuucUWSzHRclDux2VGWJcZUmEox5Q/zpxDXYNuG4CISuu9srSWq/vGCE9X3RC+6B7zy8dzvJ/qIsx6vOOcpbmII9ZpBLt8Ug4xs6pbRV0zBaOKZZXgx9jO5XzgfRp6HDcnWXNOLW3pqu6x3E6c+8Qa7n2REIfEFywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"       6\"\n        title=\"       6\"\n        src=\"/static/191b7b89ae57fc71983437d1ae1483fe/870c3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%986.png\"\n        srcset=\"/static/191b7b89ae57fc71983437d1ae1483fe/00d96/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%986.png 148w,\n/static/191b7b89ae57fc71983437d1ae1483fe/0b23c/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%986.png 295w,\n/static/191b7b89ae57fc71983437d1ae1483fe/870c3/%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5%EB%B6%88%EC%9D%BC%EC%B9%986.png 568w\"\n        sizes=\"(max-width: 568px) 100vw, 568px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>구상 visitor를 구상 Scanner에게 줘서 scaner type 변수에 넘기다.</li>\n</ol>\n<h1 id=\"5-설계-종합\" style=\"position:relative;\"><a href=\"#5-%EC%84%A4%EA%B3%84-%EC%A2%85%ED%95%A9\" aria-label=\"5 설계 종합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 설계 종합</h1>\n<ul>\n<li>UML diagram은 스팩이 너무 넓기 때문에 아래 캡쳐한것처럼 클래스 관계도를 그려서 설명합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c840deb11f8c36639f571877246d1bec/f9fad/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.62930273609885%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA9UlEQVQoz5WQ3W6DMAyF8zhDggGBJIZszd9o1G5cTOJue//XOIvSFdGulbqLT/aJ4yPbzFqLWxhj1khdDa8Uws7DaI0gK1jq8ObfMbkDBtIoywpVVYE9Ytg0DeLOYLIjXpTEwDlIEgapwdsObarzmud/Dxm22ZAQ3QgtaiheggSheW7wVBQoEufI7pldGtb4ngW+Pi3iFPBx3GMfD1AkYF4lRN9BtCU4b8Gum2/lRAqkemjqMZKEUpTMEumuekhapjOkOiXNrpu3616snvMz5peTXusJ5r3HPM9YlgUxxj/3W2POT2SzzbvZkCd0ziGEcHfC//ADw60R/1nLouwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    1\"\n        title=\"    1\"\n        src=\"/static/c840deb11f8c36639f571877246d1bec/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png\"\n        srcset=\"/static/c840deb11f8c36639f571877246d1bec/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png 148w,\n/static/c840deb11f8c36639f571877246d1bec/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png 295w,\n/static/c840deb11f8c36639f571877246d1bec/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png 590w,\n/static/c840deb11f8c36639f571877246d1bec/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png 885w,\n/static/c840deb11f8c36639f571877246d1bec/f9fad/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A91.png 1133w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca55fb91841068a728eb1175c75a63b5/89386/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.626001780943895%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABIklEQVQoz42R7WqDMBiFvZsx2NRojB/RGOMHLbKOtRZ2/zfyLLoVyjphPw4nbwhPDucNrLXsqW1b7613S5mGtEpiq4k6t9Qypk4jZPSMSnIyLykygr8hj0ARhfTZE++jZugspogQQhCHmVdCHAleXsP/AL9dJoKukJxHxXF0jK1jsh0HMzDogaZo0ZUmWB8bY2gas/kNcNM6mw0Yc+wrBqOwWnNYP9WOMsvJU4nKvKQgGMeRZblwvS7M87ybMBERn3POx0FTqpTepFSqoFGOKjOUeU0YxQRd1zGNA8epx7ke+wt4g5ZlQVko8tyXLyWpTyVl6j3dXG6zJHDOcTq9sVzOrGkfe7TbYrbzz90aYk9bwn7wxXqt8PtU91veznfd7ukL1gcTM7YmoI4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    2\"\n        title=\"    2\"\n        src=\"/static/ca55fb91841068a728eb1175c75a63b5/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png\"\n        srcset=\"/static/ca55fb91841068a728eb1175c75a63b5/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png 148w,\n/static/ca55fb91841068a728eb1175c75a63b5/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png 295w,\n/static/ca55fb91841068a728eb1175c75a63b5/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png 590w,\n/static/ca55fb91841068a728eb1175c75a63b5/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png 885w,\n/static/ca55fb91841068a728eb1175c75a63b5/89386/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A92.png 1123w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/688978a6bc9824ad4dba978b7c25339e/f4bb9/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.00440528634361%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAuElEQVQoz6WRzQ6CMBCE+0AS8IBQSukfRRMMBym+/5uMFIE0iBrjYZKd2fTLbEqEEJBSrlp8mE+zUqDZCSI74mokzoKDlwIVTZEmB0RJhDiOQJYHi7aw0HNegRV0BOUoWQ7GGIqCjVkOOubeE2stnOsxOIe2bV9gW6iUKtC8V8/ZGOMbKtRG42I11LQQb2HhJXvSWoPUvmF/w33oPzb8phXoG9razA015L9Af3fXdVPLpml2P+UX4ANQDPTwLoXnUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    3\"\n        title=\"    3\"\n        src=\"/static/688978a6bc9824ad4dba978b7c25339e/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png\"\n        srcset=\"/static/688978a6bc9824ad4dba978b7c25339e/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png 148w,\n/static/688978a6bc9824ad4dba978b7c25339e/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png 295w,\n/static/688978a6bc9824ad4dba978b7c25339e/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png 590w,\n/static/688978a6bc9824ad4dba978b7c25339e/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png 885w,\n/static/688978a6bc9824ad4dba978b7c25339e/f4bb9/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A93.png 1135w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70ba1dfecf5fb20f48eb61d099ee6cc9/5e640/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.25066904549509%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABCElEQVQoz5VR7XKDIBDkefzCaCsaLSKINWlix6/3f5QtaNOajOlMf+zccrA7ewcRQuAXJbbnsix/6o2/cY40plC5gMwlclaARQEOIYXn+SD2If8W8FKs3Ii2ZtvKzV0QUNRHineemb7GseCIomjpk3meMc8TrpcPnBTH1HeYTK/ve0gpd4w5XJMkoS5EmiJjCULqw3GcBUTXEictUVUVPhsOrSoopRazZwkppaB+iJdDjOw1QEw9uI67Go7DgGkc0F3OaE3C2/jbvT3yoiiQmnSMMSTMVJs0yxaQplZotTLJJLS0QrH7MY/cTrQH0nVXjEOPtqlR3Yn+/vFnIFprWNi9renujf6LL5jNFST5r4NUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    4\"\n        title=\"    4\"\n        src=\"/static/70ba1dfecf5fb20f48eb61d099ee6cc9/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png\"\n        srcset=\"/static/70ba1dfecf5fb20f48eb61d099ee6cc9/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png 148w,\n/static/70ba1dfecf5fb20f48eb61d099ee6cc9/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png 295w,\n/static/70ba1dfecf5fb20f48eb61d099ee6cc9/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png 590w,\n/static/70ba1dfecf5fb20f48eb61d099ee6cc9/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png 885w,\n/static/70ba1dfecf5fb20f48eb61d099ee6cc9/5e640/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A94.png 1121w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>ViewModel </p>\n<blockquote>\n<p>subject관련된건 ViewModelSubject로 이사갔어요.<br>\nDom에 의존적인 클래스 없다. 모두 인메모리 객체를 가지고 있다.  </p>\n</blockquote>\n</li>\n<li>ViewModelSubject </li>\n<li>이때 최적화를 했다.  </li>\n<li>좋은코드가 나오는 이유는 인간머리의 복잡성을 정복할 정도 쪼개져 있기때문,,, 그런데 쪼개는게 힘들어 왜? 아무렇게나 쪼개면 일관성이 없기 때문에 어떻게 쪼갤지 모르는게 문제야.</li>\n<li>객체 지향은 역할에 따라서 쪼개는것이다 !</li>\n<li>ViewModelListener</li>\n<li>[대기]</li>\n<li>ViewModelValue</li>\n<li>아래와 같이 ViewModelValue은  다음 세개 클래스에 의존 되어 있다. -> ViewModel, ViewModelSubject, ViewModelListener Class</li>\n<li>\n<p>선이 많이 몰리면 수정하기 어려운 객체 </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ViewModel -&gt; ViewModelSubject -&gt; ViewModelListener\nViewModelValue -&gt; ViewModel\nViewModelValue -&gt; ViewModelSubject\nViewModelValue -&gt; ViewModelListener</code></pre></div>\n</li>\n<li>\n<p>이래서 Dom과 관련되 lib, fw에서는 제일 먼저 자기 이벤트를 정복해서 네이티브 이벤트를 보여주지 않으려고 한다.  </p>\n<ul>\n<li>왜냐하면 네이티브이벤트에 돔과 과련된 이벤트를 짜면 감당이 안되기 때문이다.   </li>\n<li>이벤트는 옵저버 모델에서 무조건 이렇게 무겁게 된다.  </li>\n<li>옵저버 모델의 약점이다. ㅠ  </li>\n</ul>\n</li>\n<li>\n<p>하지만 설계잘했다. ! 왜? </p>\n<ul>\n<li>단방향 의존성이기 때문이다. 양향도 없고 순회해서 다시 돌아오는 경우도 없다!</li>\n<li>연관은 자연스럽다! 왜? 코드를 객체로 뺏고 그 객체를 빼기전 코드와 연관 지었기 때문에 의존성이 자동으로 생긴다. 하지만 의존성이 발생하는게 나쁜게 아니라 의존성을 단방향으로 유지하는게 중요한 것입니다. \t\t</li>\n</ul>\n</li>\n<li>클래스 관계도를 그리고 코드를 수정할일이 생겼을때 무거운 코드 클래스인지 확인해자.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/19f95a83b893bb17267f20af6abf8aeb/c7896/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.76978417266187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQoz4WR63KDIBSEfaCC1hhNRgGFIBgl1fr+z7IFtRNtMtMfO4fr8i0nqusa/4lzhsuJQpYNrlmOIiWIaQxKPxDHMQihoEGUImKMIYhzDi5qP+bYrwXDsmL4TAhGc4VqGGplQOMEuTcu8jOSJMUpyZCmGaJ5nhHkhh6t5Pga7vj282maoLWGEMIbCxTnFLwqcCkZ8rxYyTwRIWQho5QsiqxpMVgNqW5wrYDrNIy1sF5KqcUwUIqNnnvyqqo2evHyPdHDDRgfA+6dQa/5Gn3T0+x5MTzS9z26rkPTNIe9nWE4YH1ksZDsD+wvhLGUcjEMCfaGoQatkT2d0Qo3KQ4R3xmH+tuwdwki5xzGcUTrG3DcfP2fv/Herf0AEQ4WKDauyjwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    5\"\n        title=\"    5\"\n        src=\"/static/19f95a83b893bb17267f20af6abf8aeb/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png\"\n        srcset=\"/static/19f95a83b893bb17267f20af6abf8aeb/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png 148w,\n/static/19f95a83b893bb17267f20af6abf8aeb/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png 295w,\n/static/19f95a83b893bb17267f20af6abf8aeb/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png 590w,\n/static/19f95a83b893bb17267f20af6abf8aeb/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png 885w,\n/static/19f95a83b893bb17267f20af6abf8aeb/c7896/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A95.png 1112w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea030c048c2e34cc58177c6489e90971/cbf60/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.92773261065944%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQoz22R63KDIBSEeZ/WzDSTVAXDVSDWqlGn7/8oW6BjirY/dtzRw+fugUgp8SuRSUIIkbR5qRQYrdFcT7jrFrdGgbMS7FKgPL/hci5BtkObuNiDcrAKQEopXl4LeF2hbTXKiqKuGN6vFYpTAdL3PdZ1wTzP6LzD4BWmaQzvVsRvz3QZPELrmqZnFKMMDWvAGAPRxuDzbuGshTUB5gVs8M65kMDsgDk41o+J9yuTIF33ga+UcMHQBajmuPFQkfN/q0fIOAwYx2G3jk1EaY3OmZTGtQo6XIg4/PUJTYckfNidC4pe5qljwlhvXR5hbxO81emGj8AcrEOAZX4kRS+OQGNiujZJqb8DR2Cs/DNvkz/OfwOlihlbTM3DmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    6\"\n        title=\"    6\"\n        src=\"/static/ea030c048c2e34cc58177c6489e90971/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png\"\n        srcset=\"/static/ea030c048c2e34cc58177c6489e90971/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png 148w,\n/static/ea030c048c2e34cc58177c6489e90971/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png 295w,\n/static/ea030c048c2e34cc58177c6489e90971/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png 590w,\n/static/ea030c048c2e34cc58177c6489e90971/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png 885w,\n/static/ea030c048c2e34cc58177c6489e90971/cbf60/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A96.png 1107w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e67c9065939beb982ff8bdcb502af3f6/d020e/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.10375670840787%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABOUlEQVQoz21S7ZKCMAzkfQDF4/QQTlrsB7VWFPH9X2UvLVac8X7slKTJZjcl4ZxjAcN7zBjFXYffpkZTZuh5h2a/Bz9UKMtvNFWJ7XaHdbHC+muFYrNB0rYtXmCcTkY4hNgTdkRY1w3SLMO2SLEpcmoukOcZVoQ8z5GmKd2noSZ5TBMmwnC5wAiGqzO4Tw/cxxFa61kloa5r7H4qVBHVgj2pjt9JryRsL9EdBZxicEZA6R49kQkhZkK/AlLq1XbPVcz5blkNnf4+GW9XTOMV7mxxVrPNuIJYGAk8/BDv5kz1mhwZLXGhWCkV7hN7MnDWoO819NE38c+HeX80UmGNIgcy5CQNMMaEQT4OhIOzNElBvgg/iSO5kDLUO3sKufbpKDpIrLUYhoEky4Xsn18oEko5W/R9nw44/gD+3hd60iaMWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    7\"\n        title=\"    7\"\n        src=\"/static/e67c9065939beb982ff8bdcb502af3f6/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png\"\n        srcset=\"/static/e67c9065939beb982ff8bdcb502af3f6/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png 148w,\n/static/e67c9065939beb982ff8bdcb502af3f6/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png 295w,\n/static/e67c9065939beb982ff8bdcb502af3f6/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png 590w,\n/static/e67c9065939beb982ff8bdcb502af3f6/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png 885w,\n/static/e67c9065939beb982ff8bdcb502af3f6/d020e/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A97.png 1118w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fecdd51422cfdbca996f058505b0d657/32b35/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.903225806451616%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABLklEQVQoz2WS63KDIBCFfZ9OM73ExEsHFBBRQWPN+7/K6S5JJWl/nFmXhbMfrFnTNEiSd91yKeUe43fbojh9oi0+4LTDVy0g6zOq4wtO72/IPwpkv5tZQjaklO9Gd9OWDI/HHIfDAd5WUEajKGqUpDw/45XWs+v1im3bELxHrwUuYcA35eu6ouu6J0OOQgiUZYmKVVUx1lUdxXlmO4PRarRKI1iJqdforIUlKaWS4cPVn8i5iRR7nq3rBRvJTwMmcyswBesvHUetNeY5YJomWN3AWYMwzxGA69k4OITRwfVEpbjz45CSWdR9MKOz0YjXtFbwQxcbRcJoSHS8wbSPQ3g2ToRENI3wBMHX5XdewpgIGX1ZFiqY/Z3SL/Tf0BhDV57haYi8xkZ8vu/7WP8B+GAajdawfBwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    8\"\n        title=\"    8\"\n        src=\"/static/fecdd51422cfdbca996f058505b0d657/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png\"\n        srcset=\"/static/fecdd51422cfdbca996f058505b0d657/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png 148w,\n/static/fecdd51422cfdbca996f058505b0d657/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png 295w,\n/static/fecdd51422cfdbca996f058505b0d657/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png 590w,\n/static/fecdd51422cfdbca996f058505b0d657/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png 885w,\n/static/fecdd51422cfdbca996f058505b0d657/32b35/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A98.png 1116w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>Scanner, DomScanner  </li>\n<li>\n<p>DomScanner에 DomVisitor를 넣어줬긴 했지만</p>\n<ul>\n<li>DomScanner가 DomVisitor에 의존적이다 물어보면?... 애매해 하지만 간접적으로 알고 있다. </li>\n<li>DomScanner는 DomVisitor를 생성자 함수에서 받고 있다.  </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DomScanner -&gt; Scanner -&gt; Visitor &lt;- DomVisitor</code></pre></div>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd7e9886c06e689da64db1c11331c0b8/71cb0/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.56442831215971%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz12Sy3KjMBRE+aHEsQGDbRBCAon3c2Yzi/n/vziRcCUTz6KrGtG31c0lkFLyiuKbF8WTCyG4hSdEKknDCJWGFNcYmZbIh3JnKeEl5P39jcAPCVEcwwcvnkbe5MswzwVR+MGfKWdvbyxtQWt7qrIlS1LSOHGIiaMzQdd17NvGsqy0jWUwknka2fadYRhQSpE5w/hy4u9y59c2oSqDFhFrr2n6FZkrjBjIMkmgtGZoaqypqbRitgXGcWMMVVV9Vw8vZ7L0THJ7EF9Tzqc3svuV9JG59BH3a06S3AjatuX3vrKuK2NnsEqQi3+VPbz5NM/U7gItM7q2YRwntJLUpaDve6w1biZ3CZWms9UhtpVCl95EvizG165r16DSlKXEOF1jPC9RDrbWx6zXB77WtkxM00RTK8rD5HXLP5dUuOdpHNnXxV1Q4wOty+zOhqehdt/QV/LwSb5M/v91fvJDb+2h9ymNsUcD/+4T6r4axeCx7y8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    9\"\n        title=\"    9\"\n        src=\"/static/dd7e9886c06e689da64db1c11331c0b8/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png\"\n        srcset=\"/static/dd7e9886c06e689da64db1c11331c0b8/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png 148w,\n/static/dd7e9886c06e689da64db1c11331c0b8/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png 295w,\n/static/dd7e9886c06e689da64db1c11331c0b8/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png 590w,\n/static/dd7e9886c06e689da64db1c11331c0b8/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png 885w,\n/static/dd7e9886c06e689da64db1c11331c0b8/71cb0/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A99.png 1102w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"6\">\n<li>\n<p>Binder</p>\n<blockquote>\n<p>결국 Scanner는 Binder를 만들어 낸다. </p>\n</blockquote>\n</li>\n<li>\n<p>Binder의 주요 기능은? </p>\n<ul>\n<li>add를 통해서 items를 set으로 가지고 있다 </li>\n<li>viewModelUpdate Listener를 구현해서 Listener로 부터 업데이트 된것을 render에 반영할 수 있고 </li>\n<li>addProcessor로 rendering에 필요한 것들을 processor 로 가지고 </li>\n<li>\n<p>특정 뷰모델은 watch, unwatch, 직접 render할 수 있다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DomScanner -&gt; Scanner -&gt; Visitor &lt;- DomVisitor\n          Scanner -&gt; Binder</code></pre></div>\n</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e6a15400fb66268db93ab4067d0f319b/5aa1a/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.33092224231465%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz0VS2W7jMBDzDy2S1nF967Qky7ebtkGB/v9vcGeULfaBGGkEc8ihM6UUGJpglPwPzb1nFUKgvl1gO4O2KBC6G3RVwTQWprf0VqPIC1wvf5AJKWGVgDMMiYGQqn7evaWBUiB/veLn6PFYWhxRYYkzvUd0VYv6rUJJg4r8Bdm8LPh+fOJ+vyPGEWvQOI8DH59f2LYds9c0sMfrywWPqcS6zBDaoa+u2CINjDtEq+D7GV2nkWmtEb3BYA2s0diDfJ6HAUobTAOrlMjzHLLJUbcdyrpJA0RboukEitsb2lKgqhpkMUZ83E8c54l18vBksxf/LBNmJ7FGh5XUeueS2omdrButR6dVzfOEMAYIWk1mrMUyOnjvEJyhECSkVAhWpnMKxhg450m5haaQgrOYwwB2ZwijHwgWkoLN2Nr7sdG+VoxEqFPqT5tcmVxScJw0V/5oWxe8nzsGUszDjn1LPUXkmTEWMXhKzRGhTpZZHSfMZEz6+2v9wjl25BMZq3R05h6//QXL3Rv4Qe6AhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    10\"\n        title=\"    10\"\n        src=\"/static/e6a15400fb66268db93ab4067d0f319b/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png\"\n        srcset=\"/static/e6a15400fb66268db93ab4067d0f319b/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png 148w,\n/static/e6a15400fb66268db93ab4067d0f319b/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png 295w,\n/static/e6a15400fb66268db93ab4067d0f319b/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png 590w,\n/static/e6a15400fb66268db93ab4067d0f319b/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png 885w,\n/static/e6a15400fb66268db93ab4067d0f319b/5aa1a/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A910.png 1106w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"7\">\n<li>\n<p>Binder의 의존성을 확인해보자 </p>\n<ul>\n<li>모두 단방향이다. Binder는 Scanner쪽을 모르고 ViewModelValue에서 Binder를 의존하지 않기 때문에 모두 단방향이다. </li>\n<li>\n<p>나가는 선이 많은(Binder) 같이 변화, 깨지기 쉬운 클래스<br>\n반대로 들어오는 선이이 많은 클래스(ViewModelValue)는 무거운 클래스 </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Binder -&gt; ViewModel\nBinder -&gt; ViewModelValue\nBinder -&gt; ViewModelListener</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ce4e1acb5ef80bb50f9288664a559ab4/89386/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.02315227070347%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABVElEQVQoz1VR7XLCIBDMC9lpxxq1NkD4DgmJxjjj+7/I9iBS9ccOLHfs7d1VnAswAv8Hf7mvEGJFiq2nwM/uE/J4gm4c9tstDt9f2Gw+UAlKcorBSP6CJ9eSP4rwN8HjoYY4bfF73OF7V+N4alDXe1S324L77YoxDug0wzwGLMsV8+WCwWsEzSGVyihOC5qGoWEsF2KsITBUVit4Q8mtRLQcwSpoY6G0gVEtomsxzxcqcKacNn8qKGNgD9HEq+Rkmc+IfSA3KZGjFdRyy+BpFJMXmMaYO3BK5OLTNKEPHawiA95hHEcYY7Jo1dHD0Fk4a2DluhCnkmhqi05yZZ2DtRayFZkHT7l6HYFWEr3T9C5zfpUqxaEnQU0fOM1EZOEULFsvLaa7JidT7LPDFPdU7Dz2T4d9CLjPA6JXtBSeMZgiyN+WkLgxGjFGdF2XubXUIfEi+Ad6SRz9PaEngwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    11\"\n        title=\"    11\"\n        src=\"/static/ce4e1acb5ef80bb50f9288664a559ab4/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png\"\n        srcset=\"/static/ce4e1acb5ef80bb50f9288664a559ab4/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png 148w,\n/static/ce4e1acb5ef80bb50f9288664a559ab4/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png 295w,\n/static/ce4e1acb5ef80bb50f9288664a559ab4/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png 590w,\n/static/ce4e1acb5ef80bb50f9288664a559ab4/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png 885w,\n/static/ce4e1acb5ef80bb50f9288664a559ab4/89386/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A911.png 1123w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n</li>\n<li>BinderItem</li>\n<li>element, viewmodel을 알고 있다. </li>\n<li>element가 들어가 있어서 문제가 된다. </li>\n<li>Binder -> BinderItem</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/72b94051e87454bffeb900ef9cbe8591/124cd/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.35740072202166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABf0lEQVQoz21S23abQBDjd2riJjUmOBD2fmUxBpz05P9/RJ2FpM1DH+YsMwghabbgXIBR8f/U11wITiXRXmq01S+0dYfz6YRL9YiyLPHjcMDhswpJ4KAZrOLfau+95tCSgzEGKQVOVQ3VPeF3amnWo3npUJ8rPB5LPPwscTw+oHh/u+PjfcWYIgbDcJ+vyLNlWXD1EsFwKG2gtUbXdWibCvz1gqZp8FzXeGme0dQnnOsKZyIvnNEITpMChZsnVc7AWgdtHCkUmKLBsq6YbxOElOgZR/fab6o559Qz9P3+LIRAsa4L7suMcfCIZD1/oASDkQzJMkykchxHeh/gKILoLeZ5RoxhiyTROU0TjDEbaRGDwxj9roxyy4vIQEWZCQJYa/F2X7EuNygloZUivN0ikKTI0JmC2RxuhGmIlN+AYDNgJ3Rql58BighSSqQobr1zDvOU4H3YbkAIYev/KpyuCR8rWfIKkRaQlzBY/nlVdtK+/5dZJswWv36QCa/fLP8BKrEbL6QRADYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    12\"\n        title=\"    12\"\n        src=\"/static/72b94051e87454bffeb900ef9cbe8591/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png\"\n        srcset=\"/static/72b94051e87454bffeb900ef9cbe8591/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png 148w,\n/static/72b94051e87454bffeb900ef9cbe8591/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png 295w,\n/static/72b94051e87454bffeb900ef9cbe8591/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png 590w,\n/static/72b94051e87454bffeb900ef9cbe8591/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png 885w,\n/static/72b94051e87454bffeb900ef9cbe8591/124cd/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A912.png 1108w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"9\">\n<li>Processor</li>\n<li>element, viewModel을 받아서 처리해주는 클래스 </li>\n<li>Binder -> Processor</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ffc4d8a1c13c59ee45265889ed23b38/cbf60/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.56007226738934%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABfUlEQVQozzVRWbKCQAzkQs8CWRREmH1YBAHFesv9z9EvAf3ommSydTqBEAJ1TaBXiPoN8UZNsXqL777EKY2hywimjJGnCYpzhTTJEUUxwjBEwAVaVnCqhiWY92vpz75tSY2vVYUyz3A9x5CXEHmWIUsKHKMQx/ALETU7HA4I+r7H9+uB52NB13jcG4llnrCuT4zDDb0V8EbBGItLUcDIDEoUOFHD8ylHWZxoQIxLniJJUgRSKnROUwFBSYyOGGtNMBAcMzWmocdrfaBpWpRVjYolos0qYn2tmL0ge5cnaNsOK7Gb5xlD52jFPYlfxkAD+sZivPXwVhNbGjoOGIZhs1tncL/f4b3bdN4Yto5WIlaOEpTcj+I1a0eHoKld15Esz62IWXirYLXa8qQUaMjXtB0fLzDW4rlM+xRi8Lmw0/sKvP66rvj7/cGyLFDks8bzNEEpBefcrn/b7ivzp7cGvTdoiCFfm9nxtTlBSkn6mq0RN//4DLa5ng/Gcc7/B0pYHGKfOma3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    13\"\n        title=\"    13\"\n        src=\"/static/6ffc4d8a1c13c59ee45265889ed23b38/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png\"\n        srcset=\"/static/6ffc4d8a1c13c59ee45265889ed23b38/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png 148w,\n/static/6ffc4d8a1c13c59ee45265889ed23b38/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png 295w,\n/static/6ffc4d8a1c13c59ee45265889ed23b38/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png 590w,\n/static/6ffc4d8a1c13c59ee45265889ed23b38/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png 885w,\n/static/6ffc4d8a1c13c59ee45265889ed23b38/cbf60/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A913.png 1107w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"10\">\n<li>ConcreateProcessor</li>\n<li>Processsor는 method만 가지고 있는 것 구상 Processor가 실제적으로 Dom 지식을 가지고 있다. </li>\n<li>ConcreateProcessor -> Processor</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f5db5bf2c48c4174477c2ef609430764/b4e44/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.09073724007561%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABaUlEQVQoz4VR2U4DMQzcz0FVq0pFbVHLbpy9slf2plTwBKpAQkDFIX5/cLItorzwMHLsOOOZ2BGeB0kefAMpbJRigE/Cgoh+IMRp/hdOkSlUuUKmQsS+sFFzzdTTOEAaCng81HXdf8ks4aZv0XUtsixDHnnoqgxN26FpWuSpgo4E8jyD1hpRFFnS3yA6zZ2QVQVymFzGg0XXKPKG5oIJdZGjayqEB0IieYD5AhrOcsidm+sNtoymzJEEHjxuMENUMKCICUXBqpsaqYq5RqiqEn3fIznmpeb7hh3EcIIogDQIA/uHhtAQHVWb5dRsedvWSLhHssKIF5dKF9IuVCAmFwmD2JXzNR7hczTC3egMQpK1aoiJz8SLmNctZvt3LN8+MH18wkWsML3fYfKyx6zf4JIFTHYPGD+/4rxq4FwtF7hdLdCtl1DhYDMLD9tkNWu2MS8rLHSJZaHh+r6NC368UgkE95l8XtW29xtDuCAmipPziQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"    14\"\n        title=\"    14\"\n        src=\"/static/f5db5bf2c48c4174477c2ef609430764/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png\"\n        srcset=\"/static/f5db5bf2c48c4174477c2ef609430764/00d96/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png 148w,\n/static/f5db5bf2c48c4174477c2ef609430764/0b23c/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png 295w,\n/static/f5db5bf2c48c4174477c2ef609430764/799d3/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png 590w,\n/static/f5db5bf2c48c4174477c2ef609430764/2a3d6/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png 885w,\n/static/f5db5bf2c48c4174477c2ef609430764/b4e44/%EC%84%A4%EA%B3%84%EC%A2%85%ED%95%A914.png 1058w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"11\">\n<li>ConcreateProcessor, DomScanner, DomVisitor 클래스</li>\n<li>\n<p>실제 Dom 정보를 가지고 있는 클래스는? 그리고 클라이언트에서 작성해야할 클래스는? \t</p>\n<ul>\n<li><u>위 클래스를 제외 하고 인메모리 객체를 가지고 있다.</u></li>\n</ul>\n</li>\n</ol>\n<h1 id=\"6종합설명\" style=\"position:relative;\"><a href=\"#6%EC%A2%85%ED%95%A9%EC%84%A4%EB%AA%85\" aria-label=\"6종합설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.종합설명</h1>\n<ul>\n<li>\n<p>MVVM이 좋은점? </p>\n<ul>\n<li>ConcreateProcessor, DomScanner, DomVisitor 클래스를 교체하면 안드로이드, IOS에서 사용할 수 있다. </li>\n</ul>\n</li>\n<li>\n<p>옵저버 패턴을 적용해서 ViewModel 클래스 주변으로 \"ViewModelSubject, ViewModelListener, ViewModelValue\" 다음과 같은 클래스들이 생겨났다. </p>\n<ul>\n<li>그림, 설명한것처럼 비용이 싸지 않습니다. 그래서 Binder에서 render를 call하는 경우도 있습니다. </li>\n</ul>\n</li>\n<li>\n<p>코드를 깍아나갈때 중요한 점 </p>\n<ul>\n<li>\n<p>추상화 레벨을 맞춰야 한다. </p>\n<ul>\n<li>Binder, Scanner, Visitor이 세개 클래스는 dom 네이티브 객체를 가지고 있지 않는다. </li>\n<li>이것을 맞추기 위해서 DomScanner, DomVisitor가 탄생한 것   </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>코드를 짤때 궁극적으로 강사님이 원하는건? </p>\n<ul>\n<li>\n<p>dom, node, db가 됐던 특정한 네이티브 지식이 나오면 코드를 분리하자 그리고 그 위에 네이티브 지식을 모르는 것들끼리 통신을 하게 하자 ! 그러면 녹색 클래스를(Dom 네이티브지식을 가진 클래스) 제외하고 재활용 할 수 있다.  </p>\n<ul>\n<li>Binder, Scaner, Visitor 클래스가 어떻게 되어 있는지 확인해보자 </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>다음 시간에는 중요한 패턴 2가지를 배울 것 입니다. </p>\n<ul>\n<li>추상팩토리메소드 패턴 </li>\n<li>커맨드 패턴 </li>\n</ul>\n</li>\n</ul>\n<h1 id=\"7작업-클래스\" style=\"position:relative;\"><a href=\"#7%EC%9E%91%EC%97%85-%ED%81%B4%EB%9E%98%EC%8A%A4\" aria-label=\"7작업 클래스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.작업 클래스</h1>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">const</span> ViewModelListener <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> ViewModelSubject <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> ViewModel <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelSubject <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> ViewModelValue <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> BinderItem <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> Binder <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> Processor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">const</span> Scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> DomScanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Scanner <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> Visitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> DomVisitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Visitor <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DomScanner</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DomVisitor</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"8작업-코드\" style=\"position:relative;\"><a href=\"#8%EC%9E%91%EC%97%85-%EC%BD%94%EB%93%9C\" aria-label=\"8작업 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.작업 코드</h1>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token doctype\">&lt;!DOCTYPE html></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>MVVM 4회<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-viewmodel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">data-viewmodel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">data-viewmodel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>contents<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">type</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">==</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> target <span class=\"token operator\">!=</span> type<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">invalid type </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>target<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>target <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">invalid type </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>target<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> ViewModelListener <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">updated</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token string\">'override'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> ViewModelSubject <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">static</span># subjects <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">static</span># inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">static</span> <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                      v<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                      v<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">static</span> <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">static</span> <span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subjects<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#inited <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>#\n      info <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span> #listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelValue<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> ViewModelListener<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> ViewModelSubject<span class=\"token punctuation\">.</span><span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">.</span><span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token keyword\">const</span> ViewModel <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelSubject <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">static</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModel</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      attributes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      properties <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      events <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      #subKey <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      #parent <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">get</span> <span class=\"token function\">subKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> \n      <span class=\"token comment\">// read only</span>\n      <span class=\"token keyword\">get</span> <span class=\"token function\">parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#parent<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> subKey</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#parent <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#subKey <span class=\"token operator\">=</span> subKey<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">descriptor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> v<span class=\"token punctuation\">,</span>\n          <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>newV<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              v <span class=\"token operator\">=</span> newV<span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ViewModelValue</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>subKey<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">define</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> obj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperties</span><span class=\"token punctuation\">(</span>\n              obj<span class=\"token punctuation\">,</span>\n              Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">descriptor</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'styles,attributes,properties'</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>v <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> v <span class=\"token operator\">!=</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">invalid object k: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>k<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, v:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>v<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n                  <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                  Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">descriptor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ViewModel</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                      v<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">seal</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">updated</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          updated<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> ViewModelValue <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      subKey<span class=\"token punctuation\">;</span>\n      category<span class=\"token punctuation\">;</span>\n      k<span class=\"token punctuation\">;</span>\n      v<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">subKey<span class=\"token punctuation\">,</span> category<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              subKey<span class=\"token punctuation\">,</span>\n              category<span class=\"token punctuation\">,</span>\n              k<span class=\"token punctuation\">,</span>\n              v\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> BinderItem <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      el<span class=\"token punctuation\">;</span>\n      vmName<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> vmName<span class=\"token punctuation\">,</span> _0 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> _1 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vmName<span class=\"token punctuation\">,</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> el<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vmName <span class=\"token operator\">=</span> vmName<span class=\"token punctuation\">;</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> Binder <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> ViewModelListener <span class=\"token punctuation\">{</span>\n      #items <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n      #processors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> BinderItem<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#items<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> Processor<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#processors<span class=\"token punctuation\">[</span>v<span class=\"token punctuation\">.</span>category<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">viewmodel<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>viewmodel<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> processores <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#processors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#items<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>vmName<span class=\"token punctuation\">,</span>el<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">const</span> vm <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>viewmodel<span class=\"token punctuation\">[</span>vmName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              processores<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>pk<span class=\"token punctuation\">,</span> processor<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                  Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">[</span>pk<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                      processor<span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">viewmodel<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>viewmodel<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          viewmodel<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>viewmodel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token function\">unwatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">viewmodel<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>viewmodel<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          viewmodel<span class=\"token punctuation\">.</span><span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token function\">viewmodelUpdated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">updated</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#items<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>vmName<span class=\"token punctuation\">,</span>el<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              items<span class=\"token punctuation\">[</span>vmName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>rootViewModel<span class=\"token punctuation\">[</span>vmName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          updated<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>subKey<span class=\"token punctuation\">,</span>category<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>items<span class=\"token punctuation\">[</span>subKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> items<span class=\"token punctuation\">[</span>subKey<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> processor <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#processors<span class=\"token punctuation\">[</span>category<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>el <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>processor<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n              processor<span class=\"token punctuation\">.</span><span class=\"token function\">process</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> Processor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      category<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">category</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>category <span class=\"token operator\">=</span> category<span class=\"token punctuation\">;</span>\n          Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">process</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">,</span> _0 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> ViewModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                              _1 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                              _2 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_process</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">_process</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token string\">'override'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> Scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      #visitor\n      \n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">visitor<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>visitor<span class=\"token punctuation\">,</span> Visitor<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#visitor <span class=\"token operator\">=</span> visitor<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>#visitor<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">scan</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">override</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> DomScanner <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Scanner <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">visitor<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>visitor<span class=\"token punctuation\">,</span> DomVisitor<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>visitor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">scan</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> binder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Binder</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">const</span> vm <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-viewmodel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">)</span> binder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BinderItem</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> binder<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> Visitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token string\">'override'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> DomVisitor <span class=\"token operator\">=</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> Visitor <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">,</span> _0 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> _1 <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> HTMLElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">let</span> curr <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>firstElementChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>curr<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>curr <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> scanner <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DomScanner</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DomVisitor</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> binder <span class=\"token operator\">=</span> scanner<span class=\"token punctuation\">.</span><span class=\"token function\">scan</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">_process</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">'styles'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">_process</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> el<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">'attributes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">_process</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> el<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">'properties'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  binder<span class=\"token punctuation\">.</span><span class=\"token function\">addProcessor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">class</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Processor</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">_process</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vm<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> el<span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">on</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>k<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">v</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">,</span> vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">'events'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getRandom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      styles<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          width<span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\n          background<span class=\"token operator\">:</span> <span class=\"token string\">'#ffa'</span><span class=\"token punctuation\">,</span>\n          cursor<span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      events<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> vm</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              vm<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span>isStop <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> title <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          innerHTML<span class=\"token operator\">:</span> <span class=\"token string\">'Title'</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> contents <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      properties<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          innerHTML<span class=\"token operator\">:</span> <span class=\"token string\">'Contents'</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> rootViewModel <span class=\"token operator\">=</span> ViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      isStop<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">changeContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wrapper<span class=\"token punctuation\">.</span>styles<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">rgb(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getRandom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getRandom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getRandom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contents<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      wrapper<span class=\"token punctuation\">,</span>\n      title<span class=\"token punctuation\">,</span>\n      contents\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  \n  binder<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>rootViewModel<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      rootViewModel<span class=\"token punctuation\">.</span><span class=\"token function\">changeContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>rootViewModel<span class=\"token punctuation\">.</span>isStop<span class=\"token punctuation\">)</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></code></pre></div>\n<p>태그: [대기]</p>","excerpt":"…","tableOfContents":"<ul>\n<li><a href=\"/OOPWithJavascript_4/#%EB%AA%A9%ED%91%9C\">목표</a></li>\n<li>\n<p><a href=\"/OOPWithJavascript_4/#1-isp\">1. ISP</a></p>\n<ul>\n<li><a href=\"/OOPWithJavascript_4/#11-%EC%98%B5%EC%A0%80%EB%B2%84-%EC%84%9C%EB%B8%8C%EC%A0%9D%ED%8A%B8-%ED%8C%8C%EC%9D%BC-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%95%98%EA%B8%B0\">1.1 옵저버 서브젝트 파일 리팩토링 하기</a></li>\n<li><a href=\"/OOPWithJavascript_4/#12-notify-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81\">1.2 notify 리팩토링</a></li>\n</ul>\n</li>\n<li><a href=\"/OOPWithJavascript_4/#2-%EC%84%AC%EC%84%B8%ED%95%9C-%EA%B6%8C%ED%95%9C-%EC%A1%B0%EC%A0%95\">2. 섬세한 권한 조정</a></li>\n<li>\n<p><a href=\"/OOPWithJavascript_4/#3-visitor-pattern\">3. Visitor Pattern</a></p>\n<ul>\n<li><a href=\"/OOPWithJavascript_4/#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%EC%A0%84-scanner-%EC%86%8C%EC%8A%A4-%EC%84%A4%EB%AA%85\">리팩토링 전 Scanner 소스 설명</a></li>\n<li><a href=\"/OOPWithJavascript_4/#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%9B%84-scanner-%EC%86%8C%EC%8A%A4-%EC%84%A4%EB%AA%85\">리팩토링 후 Scanner 소스 설명</a></li>\n</ul>\n</li>\n<li><a href=\"/OOPWithJavascript_4/#4-%EC%B6%94%EC%83%81%EA%B3%84%EC%B8%B5-%EB%B6%88%EC%9D%BC%EC%B9%98\">4. 추상계층 불일치</a></li>\n<li><a href=\"/OOPWithJavascript_4/#5-%EC%84%A4%EA%B3%84-%EC%A2%85%ED%95%A9\">5. 설계 종합</a></li>\n<li><a href=\"/OOPWithJavascript_4/#6%EC%A2%85%ED%95%A9%EC%84%A4%EB%AA%85\">6.종합설명</a></li>\n<li><a href=\"/OOPWithJavascript_4/#7%EC%9E%91%EC%97%85-%ED%81%B4%EB%9E%98%EC%8A%A4\">7.작업 클래스</a></li>\n<li><a href=\"/OOPWithJavascript_4/#8%EC%9E%91%EC%97%85-%EC%BD%94%EB%93%9C\">8.작업 코드</a></li>\n</ul>","fields":{"slug":"/OOPWithJavascript_4/"},"frontmatter":{"title":"객체지향 자바스크립트 4회차(MVVM pattern 개선2)","date":"Mar 15, 2020","tags":["코드스피츠","객제지향 자바스크립트"],"keywords":["객체지향","MVVM","ISP","Visitor Pattern"]}}},"pageContext":{"slug":"/OOPWithJavascript_4/","series":[{"slug":"/OOPWithJavascript_1/","title":"객체지향 자바스크립트 1회차(객체지향이란? with design Pattern)","num":1},{"slug":"/OOPWithJavascript_2/","title":"객체지향 자바스크립트 2회차(MVVM 구현)","num":2},{"slug":"/OOPWithJavascript_3/","title":"객체지향 자바스크립트 3회차(MVVM pattern 개선)","num":3},{"slug":"/OOPWithJavascript_4/","title":"객체지향 자바스크립트 4회차(MVVM pattern 개선2)","num":4},{"slug":"/OOPWithJavascript_5/","title":"객체지향 자바스크립트 5회차(MVVM pattern 개선2)","num":5}]}}}